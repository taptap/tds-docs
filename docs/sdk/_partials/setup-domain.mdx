import { Conditional } from "/src/docComponents/conditional";

<Conditional region="global">

使用 TDS 提供的云服务，初始化 SDK 需要在 `server_url` 处填入 API 域名，可前往 **开发者中心 > 你的游戏 > 游戏服务 > 应用配置 > 域名配置** 获取 TDS 提供的 **共享域名**。

</Conditional>

<Conditional region="cn">

使用 TDS 提供的云服务需要绑定 **API 自定义域名**，以便和其他厂商的应用隔离入口，避免其他应用受到 DDoS 攻击时相互牵连。

如果使用了数据存储中的文件服务，包括即时通讯的多媒体消息（图像、音频、视频等），需要绑定**文件访问域名**。

### 绑定 API 域名

绑定 API 域名的前提是，你拥有一个**已经完成备案的域名**。

<details>
<summary>点击查看 API 域名绑定步骤</summary>

假设你的域名为 `example.com`，API 域名绑定步骤和状态如下：

![domain guide](/img/domain-guide.png)

- 进入 **开发者中心 > 你的游戏 > 游戏服务 > 应用配置 > 域名配置 > API** ，点击 **「绑定新域名」** 按钮。API 域名不支持直接绑定裸域名，需要在主域名的前面添加自定义名称，也就是绑定一个子域名，比如这里你可以绑定 `api.example.com`。
- 控制台显示 **「正在检查备案信息」**，请等待一会儿。
- 如果域名没有完成备案，将会显示 **「绑定失败」**。
- 域名备案检查通过，域名下方显示 **「请配置 DNS」**。
- 此时需要到你的域名服务商控制台，进入域名解析设置页面，添加一条记录，记录类型为 A（A 记录可以将域名指向一个 IP 地址），请将前面填到开发者后台的自定义域名和 **「推荐 DNS 配置」** 下方 A 记录值复制到对应位置。
- DNS 解析记录和证书申请（如果选择了自动管理 SSL 证书）都需要一定时间，请耐心等待。记录生效后，控制台便会显示 **「已绑定」**。

</details>

绑定成功后，初始化 SDK 时请传入绑定的自定义域名 `https://api.example.com`。这里用的是示例，请换成你自己绑定的 API 域名，注意不要遗漏前面的 `https://`。

配置域名需要一定的时间，TDS 为开发者提供了 **共享域名** 在游戏测试时使用，但共享域名没有可用性保证，容易受到 DDoS 攻击影响。游戏上线前，一定要确认使用的 API 访问域名是开发者自己绑定的域名，请勿将共享域名用于生产环境。

### 绑定文件域名

可前往 **开发者中心 > 你的游戏 > 游戏服务 > 应用配置 > 域名配置 > 文件** 绑定文件域名，步骤和 API 自定义域名基本相同。但有两点不一样：

1. API 域名解析使用 A 记录，文件域名解析使用 CNAME 记录。文件域名同样不支持绑定裸域名，需要绑定子域名。例如你的主域名是 `example.com`，可以绑定文件域名为 `files.example.com`。
2. 绑定成功后，还需在 **云服务 > 数据存储 > 文件 > 设置 > 文件访问地址** 点击「修改」按钮进行切换。

:::info

每个子域名只能绑定到一个游戏，且 API 域名和文件域名不可使用同样的子域名。如果你已经在 TDS 控制台绑定了某个子域名，重复绑定时控制台会显示「该域名已经被其他应用所绑定」，此时可以更换同一主域名下不同的子域名，来完成后续绑定步骤。

:::

</Conditional>
