---
title: 公告系统功能介绍
sidebar_label: 功能介绍
sidebar_position: 1
---

import { Conditional } from "/src/docComponents/conditional";

## 产品介绍

开发者在开发者中心发布编辑公告内容，玩家在打开游戏时可以收到公告通知。

## 核心优势

- 节省成本：减少开发成本
- 运营工具：游戏运营日常高频使用到的内容发布工具
- 个性配置：可以自行上传主题样式，配置多维度分发内容，不需要二次研发
- 兼容性强：WebView 界面比游戏引擎绘制的界面更好地兼容图文排版
- 维护方便：不依赖于其他服务支持，且更新不需要升级 SDK

## 接入准备

- 开通权限：请至「权限管理」中给该账号设置「游戏管理员」权限
- 依赖服务：开发者需要给公告配置一个自定义域名，确保公告可以被正常访问到
- 设计样式：需要设计师根据 **[《公告系统设计指南》](/design/design-billboard/)** 准备好公告面板的素材
- 支持版本：iOS / Android 最低支持版本 TapSDK 3.17.0，Unity 和 UE 最低支持版本 TapSDK 3.17.0，**同时支持移动端和 PC 端**

## 功能介绍

### 业务流程

![](/img/billboard/liuchengtu.png)

### 开通服务

开发者可以在 **开发者中心 > 游戏服务 > 应用配置** 找到公告系统，点击立即开通服务。

![](https://capacity-files.lcfile.com/Nbfo8oQW6K7M1wOFTpJ0Osy8p6Lwj9CA/open_billboard.png)

<Conditional region="cn">

### 域名配置

为了确保公告系统正常访问和安全运作，TDS 建议开发者绑定自己公司的域名，绑定域名流程可查阅 **[《域名配置指南》](/sdk/domain/guide/)**。

![](https://capacity-files.lcfile.com/Az9ieoDfeykXfNUIjWcUyxoTFxYuRBmk/bond_url.png)

</Conditional>

### 模板配置

TDS 为开发者提供了多种公告模板，可以在游戏内任意位置唤起不同样式的公告面板，结合游戏自身画风自定义上传样式进行 UI 换肤。

- **导航公告**：适用于公告数量较多和发布频次较高的游戏

- **开屏公告**：游戏维护和停服期间，打开游戏后立即可见，且不能手动关闭

- **跑马灯公告**：游戏主界面上的滚屏通知，不会干扰用户玩游戏

- **图片公告**：适用于公告数量较少和需 Banner 设计的游戏 **（暂未开放）**

:::tip

TDS 提供了一套默认风格，并支持恢复到默认配置，样式设计可以参考 **[《公告系统设计指南》](/design/design-billboard/)**

:::

![](https://capacity-files.lcfile.com/cdC8h0yFuvMT968oJQLrnQOu3yobs2tx/bond_des.png)

### 导航公告
导航公告可配置如下
- 全局通用配置：默认文字颜色、辅助文字颜色、高亮文字颜色、链接文字颜色、字体、小红点、关闭按钮、空状态、导航分类标签
- 横屏游戏必配：顶栏背景图、内容背景图、标签栏默认背景图、标签栏选中背景图
- 竖屏游戏必配：顶栏背景图、内容背景图、标签栏默认背景图、返回按钮

:::tip

1、导航公告也能作为开屏公告使用，可满足用户进入游戏后直接拉起公告面板

2、上传的切图大小尽量控制在 **100 KB** 以内，可以加快公告打开速度

3、上传的字体大小尽量控制在 **5 MB** 以内，可以快速加载字体

:::

![](https://capacity-files.lcfile.com/g5Cbic22VtBfa4BhkzKOlD3IJPDhtpbx/edit_mod.png)

**关于导航分类标签配置**

为了区分不同公告类型的优先级程度，开发者可以自定义配置公告标签样式，TDS 默认提供了 6 种样式可以在不同的场景下使用。此处配置不强行要求，可以为空展示。

![](/img/billboard/billboard_label.png)


### 开屏公告
开屏公告可配置如下

- 全局通用配置：标题文字颜色、默认文字颜色、高亮文字颜色、链接文字颜色、字体、空状态
- 横屏游戏需配：滚屏区域长度、内容背景长度、公告显示位置
- 竖屏游戏需配：滚屏区域长度、内容背景长度、公告显示位置

:::tip

1、开屏公告没有关闭按钮，仅满足在特殊场景下打开，请谨慎使用

2、上传的切图大小尽量控制在 100 KB 以内，可以加快公告打开速度

3、上传的字体大小尽量控制在 5 MB 以内，可以快速加载字体

:::

![](https://capacity-files.lcfile.com/qSeRQovHTQqlPLafYmYz21uJaVpWhRJu/billboard_screen.png)


### 跑马灯公告
跑马灯公告可配置如下

- 全局通用配置：默认文字颜色、内容背景颜色、链接文字颜色、字体、公告图标、循环次数
- 横屏游戏必配：顶栏背景图、内容背景图
- 竖屏游戏必配：顶栏背景图、内容背景图

:::tip

1、跑马灯可自定义长度，长度范围是最小 150 px，最大 500 px

2、跑马灯可以在界面上任意位置，可以通过调整偏移距离来控制

3、上传的字体大小尽量控制在 2 MB 以内，利于引擎快速加载字体

4、关于字体兼容 Unity PC 版本，需要使用与游戏构建相同的 Unity Editor 版本，避免不同版本的 AssetBundle 不兼容的问题

:::

![](/img/billboard/billboard_paomadeng.png)


### 维度配置

维度配置是为了帮助开发者更好地进行**公告分发**，开发者可以根据游戏的发行维度需求，自定义分发维度。

- 预设维度：初始提供 2 个预设维度「渠道」和「地区」，不可编辑和删除。
  - 「渠道」初始默认预设字段「iOS」「Andriod-TapTap」共 2 个
  - 「地区」初始默认预设字段「中国大陆」「中国澳门」「中国香港」「中国台湾」「日本」「美国」「韩国」「印度尼西亚」「泰国」共 9 个
- 自定义维度：最多添加 10 个自定义维度，可以编辑和删除，维度的参数和描述不可重命名。
  - 每个维度下，可以自定义添加字段
  - 字段的参数和描述不可重命名
- 推荐维度：「版本号」「区服」「环境」「包体」「平台」

:::caution

1、字段参数支持数字、英文、下划线，区分大小写，长度为 20 个字符

2、字段作为前后端传参的依据，建议规范命名，不可重命名

3、已创建的维度和字段不能修改参数，建议游戏封包前全面测试，游戏上线后切勿随意删改

:::

![](https://capacity-files.lcfile.com/RrcOGH1moiD01XnT7GwLyMOHmiaF7nCU/weidu_config.png)

### 发布公告

发布公告需要填写公告内容和公告设置，支持立即**提交发布**，也能**保存草稿**。草稿状态下的公告不会对外展示。另外，已发布的公告不可存为草稿，但可以单独对已发布的公告进行**显示**或**隐藏**。

公告内容需要填写：长标题、短标题（仅在导航模板中展示）、公告正文，并支持多语言配置

![](https://capacity-files.lcfile.com/Ia6CpGTfD2Ae6f0JJ97sqlVUEzO067ht/release_billboard_content.png)

公告设置需要选择：可见范围、公告类型、跳转位置、分发维度、定时设置

- 可见范围：可以将该条公告内容关联到某一个模板，目前可选导航模板
- 公告类型：可以选择更新公告、维护公告、上新公告、活动公告、玩法公告、测试公告、停服公告
- 跳转位置：**公告正文**、**链接地址**、**游戏内模块**
- 分发维度：可以**不限制维度**分发，也可以根据需求选择**多个维度**，每个维度下可以选择多个选项
- 定时设置：可以设置公告**定时发布**和**定时隐藏**

:::tip

1、从公告跳转到游戏内模块，开发者可以自定义回调地址，自行处理，公告系统不会限制游戏跳转的业务场景

2、公告发布后可以修改维度

3、已隐藏的公告再重新提交发布后会自动显示

:::

![](https://capacity-files.lcfile.com/N2FWeddK8DMVFNl7djj21KDVTxWQoMwJ/release_billboard_config.png)

### 公告排序

**公告排序**可以通过编辑数字来控制公告在 SDK 侧边导航展示的顺序，数字越大排序越靠前

可以通过编号、状态、可见范围、地区、渠道、长标题和公告发布时间段来**筛选公告**

![](https://capacity-files.lcfile.com/j0jtOJSNvdI3S1LC0J47Aoj10s0Uv8nx/billboard_list.png)

### 复制公告

开发者可以将现有已编辑完的**公告复制**到本游戏或者其他游戏，作为草稿使用，便于重复运用模板，另外公告下的维度配置是不支持复制的，复制后会默认置为不限维度

![](https://capacity-files.lcfile.com/WYFIrx6FOjwbHby3pfxWLWHeKpeSLQhY/copy_billboard.png)

### 展示公告

#### 导航公告

红点逻辑：「游戏公告 Tab」和「活动公告 Tab」下至少有一条未读消息时会显示红点，若公告消息都为已读状态，则红点消失

数据上限：导航模板下会展示最新发布的 20 条公告

公告详情：可高亮展示文案，展示图片，播放视频，文字链跳转。横屏状态会自动展开第一条公告详情，竖屏状态会先展示公告列表，进入公告详情可返回到公告列表

跳转说明：链接支持外部浏览器打开页面，或是跳转到游戏内模块，或是跳转到公告详情

![](/img/billboard/default_mod.png)

![](/img/billboard/default_mod_shuping.png)


#### 开屏公告

展示逻辑：展示「可见范围」为开屏维护公告的数据，且状态为「已显示」，若存在多条数据，则按照「公告排序」数值最大的展示，且仅展示一条公告数据。公告标题会拉去「长标题」字段数据，公告正文会拉去「正文」字段数据，并渲染、视频和链接

展示次数：不限制开屏公告的展示次数

关闭逻辑：开屏公告显示时间范围是「发布时间」到「结束之间」内，超过结束时间后，弹窗自动关闭。公告弹窗要覆盖在游戏主界面上，且不可以被用户手动关闭，游戏可以自己控制关闭公告

数据更新：调用一次数据后，不会实时更新内容数据。如，开发者在后台修改公告内容，用户需要关闭进程，重新进入游戏才会拉取新的数据。若开发者在后台修改了公告显示时间，用户看到开屏公告自动关闭，用户点击进入游戏，此时需要注意，游戏的服务端需要返回一个结果，如「游戏正在维护中」

![](https://capacity-files.lcfile.com/FQe8hAK4GknzfRS779MtfqObDP5BvIPP/open_mod.png)

![](https://capacity-files.lcfile.com/3F05L7i4MTWO8LasBFbMfOixbJkAeNTY/open_mod_shuping.png)


#### 跑马灯公告

展示逻辑：展示「可见范围」为跑马灯公告的数据，且状态为「已显示」，若存在多条数据，则每条按照「公告排序」数值从大到小依次循环播放，单条公告按照轮询次数播放。公告正文会拉去「正文」字段数据，不会渲染图片，视频，链接，纯文本数据。

轮询次数：跑马灯公告的轮询次数随模版走，而不是随单条公告。一个游戏只有一个跑马灯公告配置。当开发者修改了跑马灯公告模板配置时，下次初始化才会拉取最新的模版配置。举个例子，当运营配置了轮播此时为 「5」，此时发布了公告 A 和公告 B，公告 A 单条播放 5 次后公告 B 才会单挑播放 5 次

关闭逻辑：显示时间是「发布时间」（存在轮询延迟，本地通过轮询方式，间隔 5 min 拉取，后端对应接口获取数据），跑马灯播放完后会需要自动关闭（后台设置的隐藏时间不会影响，但是隐藏状态的跑马灯无法被展示出来），游戏可以控制关闭跑马灯公告，譬如一些进入游戏对局后切换的场景。跑马灯公告不可以被用户手动关闭。

![](https://capacity-files.lcfile.com/LtI6SDLyPBmTpVaPU4w03vKjgUq4b8X4/billboard_paomadeng.png)



#### 图片模板

目前暂未开放

## 常见问题

**问：可以在同一个游戏内使用多个公告模板吗？** 

答：可以，同一个游戏可以使用「导航公告」、「跑马灯公告」等


**问：跳转链接是否可以在游戏内打开？**

答：支持

**问：分发维度选择「平台」为「iOS」，地区为「中国大陆」，区服为「S1 区」「S2 区」，那用户侧的效果是什么样的？**

答：这条公告只有同时满足 iOS + 国服 + S1 和 S2 的用户才能看到，Android 的用户看不到，S3 和 S4 的用户看不到


**问：现在只提供 3 种公告模板吗？**

答：后续会推出更多常用的公告模板，如果需要定制化的，建议开发者使用 API 的方式接入


**问：跑马灯公告和其他模板同时展示，会不会互相覆盖？**

答：TDS 提供了关闭跑马灯的接口，对于两者能否需要同时展示，游戏可以自行处理


**问：跑马灯公告在播放时，用户关闭游戏进程怎么办？那用户要怎么关闭跑马灯公告？**

答：游戏可以在切换场景时，自动关闭跑马灯公告。开发者可以在后台，把这条公告直接隐藏或是删除。


**问：公告类型可以自定义配置吗？**

答：目前暂不支持
