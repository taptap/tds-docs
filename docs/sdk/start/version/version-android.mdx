---
title: Android
sidebar_position: 2
---

## 3.20.0
更新时间 2023-08-18

### 功能更新
- **Common:** 新增时长统计功能，默认开启，开发者可调用 `setDurationStatisticsEnabled` 接口进行设置
- **PaymentsGlobal:** 支持 Alipay CN 免密支付

### 内部优化
- **Login:** 添加登录状态监听处理
- **Bootstrap:** 添加登录状态监听处理


## 3.19.4
更新时间 2023-08-16

### Bug 修复
- **Common:** 修复当使用网页进行实名授权且通过返回键取消时没有回调的问题
- **Common:** 适配 Android 11 存储权限判断
- **Moment:** 适配 Android 13 相册读取权限及修改保存至相册时权限请求
- **TapDB:** 适配 Android 11 存储权限判断
- **Support:** 适配 Android 文件存储权限判断


## 3.19.3
更新时间 2023-08-02

### 优化
- **Common:** 适配 Android 13, 删除废弃 WebSettings API 调用
- **Common:** 优化网页授权的 UI
- **Login:** 适配 Android 13, 删除废弃 WebSettings API 调用
- **Login:** 优化网页授权的 UI
- **Moment:** 适配 Android 13, 删除废弃 WebSettings API 调用
- **Billboard:** 适配 Android 13, 删除废弃 WebSettings API 调用

### Bug 修复
- **Support:** 修复获取客服网页链接时因参数 `path` 含 `query` 参数导致的异常问题
- **Billboard:** 修复部分机型显示公告异常的兼容性问题

## 3.19.2
更新时间 2023-07-24

### 优化
- **Billboard:** 优化公告模块初始化时未检查公告配置有效性的问题

## 3.19.1
更新时间 2023-07-20

### 优化
- **AntiAddiction:** 为优化因多次点击使用 Tap 认证导致的多次获取授权问题，在触发授权时禁用跳转按钮

### Bug 修复
- **Common:** 修复 SP 可能因未初始化导致的 NPE 问题

### 内部优化
- **Login:** 替换网页授权的域名避免过多 302 影响用户体验
- **Common:** 替换网页授权的域名避免过多 302 影响用户体验

## 3.19.0
更新时间 2023-07-07

### 功能更新
- **TapPayment:** 支持微信和支付宝的 App 支付和微信支付，依赖 TapCommon 3.19.0 版本

### Bug 修复
- **AntiAddiction:** 修复手动实名窗口身份证输入框在部分设备上无法输入 X 的问题

### 内部优化
- **Common:** 新增对 TapPayment 的接口支持

## 3.18.9
更新时间 2023-06-30

### 优化
- **AntiAddiction:** 为优化因多次点击使用 Tap 认证导致的多次获取授权问题，在触发授权时添加 Loading 提示

### 功能更新
- **PaymentsGlobal:** 新增海外支付模块，为开发者在 TapTap 商店销售游戏以及在游戏内销售数字商品和内容提供最佳解决方案


## 3.18.8
更新时间 2023-06-15

### 优化
- **DB:** 添加对因 OAID 缺少对应平台架构 so 库文件而发生异常的捕获
- **AntiAddiction:** 为兼容 Java 1.8 及 Gradle 插件 4.0 以下低版本不支持 Lambda 表达式问题，将现有 Lambda 部分改为普通匿名类
- **Friend:** 为兼容 Java 1.8 及 Gradle 插件 4.0 以下低版本不支持 Lambda 表达式问题，将现有 Lambda 部分改为普通匿名类

### 内部优化
- **Common:** 添加在 TapSDK 初始化完成后支持通过 ContentProvider 方式获取 TapConfig 中 clientToken 及 serverUrl 字段


## 3.18.7
更新时间 2023-05-25

### Bug 修复
- **AntiAddiction:** 修复个别机型防沉迷提示窗无法完全展示问题


## 3.18.6
更新时间 2023-04-27

### Bug 修复
- **AntiAddiction:** 修复部分情况下取消授权后页面无法消失的问题

### 优化
- **Support:** 打开的客服页面支持多语言适配
- **Achievement:** 延长网络超时到 10s
- **Achievement:** 优化部分错误信息的解析
- **DB:** 优化缓存文件读写次数
- **Common:** 删减 LZ4 中不必要的架构支持


## 3.18.5.1
更新时间 2023-04-18

### 优化
- **Common:** 优化语言设置


## 3.18.5
更新时间 2023-04-10

### 功能更新
- **Common:** 添加应用配置数据封装
- **DB:** TapDB 新增设备属性
- **DB:** 添加设备标识数据封装
- **Login:** 添加用户信息封装


## 3.18.4
更新时间 2023-03-30

### 功能更新
- **DB:** TapDB 新增接口控制是否使用 Themis
- **DB:** Themis 更新
- **License:** 新增接口支持跳过缓存强制检查购买状态

### Bug 修复
- **DB:** TapDB 不再获取 ipv6 地址
- **DB:** TapDB 版本号改为 TapSDK 版本号


## 3.18.3
更新时间 2023-03-24

同步版本


## 3.18.2
更新时间 2023-03-20

### 功能更新
- **AntiAddiction:** 更新防沉迷认证接口
- **Achievement:** UI 适配大屏设备

### Bug 修复
- **AntiAddiction:** 修复提示 UI 错位问题 
- **AntiAddiction:** 修复iOS 部分情况下进入宵禁未弹出提示异常
- **DB:** 默认关闭从 TapTap 获取 device id


## 3.18.1
更新时间 2023-03-06

### 功能更新
- **DB:** 添加网络重定向支持

### Bug 修复
- **Payment:** 修复用户支付主动取消时没有回调的异常


## 3.18.0
更新时间 2023-02-20

### 功能更新
- **Support:** 支持自有账户关联登录
- **Support:** 支持 TDS 内建账户登录（需要 LeanCloud SDK 8.2.17）
- **Support:** 优化客服接口


## 3.17.0
更新时间 2023-02-17

### 功能更新
- **Billboard:** 添加跑马灯和开屏公告


## 3.16.6
更新时间 2023-01-06

### Bug 修复
- **AntiAddiction:** 修复 Android 多 Activity 下，退出游戏有可能重启的 bug


## 3.16.5
更新时间 2022-12-05

### 功能更新
- **DB:** 添加设备时长上报

### 优化
- **AntiAddiction:** 添加平台兼容性处理
- **Payment:** 优化设备 ID 获取处理


## 3.16.4
更新时间 2022-11-17

### 功能更新
- **Login:** 修改网页登录 UI 显示

### Bug 修复
- **Login:** 修复部分情况下资格验证时回调异常
- **Bootstrap:** 修改网络连接状态变更或系统启动时唤起推送服务问题

### 优化
- **AntiAddiction:** 添加沙盒环境下实名优化处理


## 3.16.2
更新时间 2022-10-31

### 功能更新
- **Support:** 新增 SDK 内打开客服页面的能力
- **DB:** 整体切换到 2.0 接口和格式


## 3.16.1
更新时间 2022-10-17

### 功能更新
- **Billboard:** 新增关闭按钮回调事件
- **Billboard:** 优化网络异常时 UI 显示
- **DB:** 添加设置 OAID 密匙接口
- **Friend:** 添加数据埋点支持


## 3.16.0
更新时间 2022-09-30

### 功能更新
- **Payment:** 提供海外支付功能


## 3.15.0
更新时间 2022-09-13

### 优化
- **AntiAddiction:** 防沉迷接口优化
- **DB:** 新版OAID适配
- **fixed bugs:** 修复成就 SDK 在 Android 12 上首次初始化失败的问题
- **Login:** 优化登录 SDK 内不必要的错误日志


## 3.14.0
更新时间 2022-08-31

### 功能更新
- **DB:** 添加对异常上报 Themis 模块支持


## 3.13.0
更新时间 2022-08-18

### 功能更新
- **Login:** 支持新的授权 Scope：basic_info、email

### Bug 修复
- **Login:** 修复一些登录时数据异常导致的崩溃


## 3.12.0
更新时间 2022-08-04

### 功能更新
- **Billboard:** 添加公告模块

### Bug 修复
- **Payment:** 支付界面旋转引起的crash


## 3.11.1
更新时间 2022-07-25

### 优化
- **Friend:** 更新获取 Tap 互关好友的方式


## 3.11.0
更新时间 2022-07-12

### Bug 修复
- **DB:** TapDB 桥接传入参数为null时增加了兼容处理


## 3.10.0
更新时间 2022-06-30

### 功能更新
- **Achievement:** 支持海外成就服务
- **Bootstrap:** 添加排行榜服务


## 3.9.0
更新时间 2022-05-25

### 功能更新
- **Payment:** 发布国内支付MVP版本(内测中)

### 优化
- **Moment:** 动态SDK本地多语言资源适配


## 3.8.0
更新时间 2022-05-09

### 功能更新
- **Friend:** 添加好友模式黑名单

### 优化
- **Moment:** 优化授权请求逻辑


## 3.7.1
更新时间 2022-04-11

### 功能更新
- **DB:** 增加开机时间的获取和上报

### Bug 修复
- **Moment:** 动态旋转问题的修复

### 优化
- **AntiAddiction:** 优化从主站授权的逻辑


## 3.7.0
更新时间 2022-03-28

### Bug 修复
- **Friend:** 分享链接支持自定义用户名称及配置额外自定义参数
- **Friend:** 添加解析及处理分享链接接口
- **Friend:** 添加关注模式下黑名单相关接口
- **Friend:** 好友请求数据中添加对方富信息数据
- **Friend:** 支持根据用户 ID 查找用户信息
- **Login:** 添加获取互关好友列表接口


## 3.6.3
更新时间 2022-03-08

### 功能更新
- **DB:** 当初始化地区为海外时，使用海外上报域名（如果之前已接入数据分析功能，且初始化地区为海外，升级 SDK 至 3.6.3 前需迁移数据，请提交工单联系我们）

### Bug 修复
- **Bootstrap:** LCPush 的 receiver exported 参数改为 true 以适配 Android 12
- **Achievement:** 成就面板在稀有度为0时不显示稀有度对应文案
- **Achievement:** 资源使用改为R文件引用
- **Login:** 尝试修复静态变量丢失的问题
- **Login:** 资源使用改为R文件引用
- **Moment:** 修复某些机型上会触发 getDialog 相关的 NPE 问题
- **Common:** 修复特定机型上繁体中文的识别
- **Common:** 修复初始化时未配置 TapDBConfig 会初始化失败的问题
- **AntiAddiction:** 提升防沉迷服务异常情况下的用户体验


## 3.6.1
更新时间 2022-01-25

源源新生颂光阴，邸安宅暖迎佳期，值此新年之际，TapSDK祝愿幸福与美好一直伴您左右

### Bug 修复
- **RTC:** RTC 接口优化
- **Login:** 登陆 UI 优化
- **Moment:** 内嵌动态支持多语言上报
- **AntiAddiction:** 实名认证接口移除参数TapToken


## 3.6.0
更新时间 2022-01-07

### Bug 修复
- **Friend:** 支持获取 Tap 及游戏内单向关注模型好友列表
- **License:** DLC 修复在查询回调内直接发起购买请求后无法获得购买回调的问题


## 3.5.1
更新时间 2021-12-08

### Bug 修复
- **Achievement:** 修复读取服务器数据时已达成字段无法解析的问题
- **AntiAddiction:** 防沉迷服务端异常时增加兼容处理
- **AntiAddiction:** 切换账号可隐藏
- **AntiAddiction:** 更新切换账号的回调 code （1000 -> 1001）


## 3.5.0
更新时间 2021-11-30

### 功能更新
- **RTC:** 新增 RTC（实时语音） 模块

### Bug 修复
- **Friend:** 根据好友码查找好友
- **Friend:** 根据好友码添加好友
- **Friend:** 查询第三方好友列表
- **Friend:** 关注 TapTap 好友
- **Achievement:** 修复读取本地数据已达成成就识别成未达成的问题
- **Login:** 内嵌 web 登录页面支持异形刘海屏的正常展示
- **DB:** 上报新增 soc 相关参数
- **Moment:** 依赖更新
- **Common:** 支持性更新


## 3.3.2
更新时间 2021-11-11

### Bug 修复
- **DB:** 更新一些内部字段
- **AntiAddiction:** Api 增加公用参数


## 3.3.1
更新时间 2021-10-25

### 功能更新
- **Friend:** 好友新增多语言支持

### Bug 修复
- **Friend:** 从分享页跳转到应用内且发送好友申请时，从提示改为回调。


## 3.3.0
更新时间 2021-10-15

### 功能更新
- **Support:** 新增客服模块
- **Friend:** 新增好友模块
- **AntiAddiction:** 新增防沉迷模块

### Bug 修复
- **Achievement:** UI 调整
- **Moment:** 优化统计参数


## 3.2.1
更新时间 2021-09-02

### Bug 修复
- **Bootstrap:** 修复登录后重新打开时获取用户时没有 ObjectId 的问题


## 3.2.0
更新时间 2021-09-01

### 功能更新
- **Bootstrap:** 支持云存档
- **LeanCloud:** 支持排行榜


## 3.1.0
更新时间 2021-07-28

### 功能更新
- **Bootstrap:** 支持游戏内好友
- **Achievement:** 支持游戏内成就

### Bug 修复
- **Moment:** 修复在 Android 11 的设备上没有特定权限时打开动态会崩溃的问题
- **License:** 修复正版验证在某些情况下会在验证成功后崩溃的问题


## 3.0.0
更新时间 2021-07-16

Tips: 当前版本不支持 v2.x 升级

### 重大变更
- **Bootstrap:** 账号系统升级为TDSUser
- **Bootstrap:** 登录相关接口修改
- **Bootstrap:** 获取篝火资格接口移动至 TapLogin 模块
- **Bootstrap:** 删除设置语言接口
- **Login:** 开放所有接口，支持获取 TapTap 账号的 openID 和 unionID

### Bug 修复
- **Moment:** 修复一个可能导致页面崩溃的 bug


## 2.1.8
更新时间 2021-07-22

### Bug 修复
- **Moment:** 修复在 Android 11 的设备上没有特定权限时打开动态会崩溃的问题
- **License:** 修复正版验证在某些情况下会在验证成功后崩溃的问题


## 2.1.7
更新时间 2021-07-14

- TapDB 上报参数新增 event_uuid & session_uuid & event_index
- TapDB 充值接口新增支持传入自定义字段的函数
- TapDB 版本号更新为 3.0.4
- TapDB 提高拿 Google ADID 的成功率
- TapMoment 中和前端定义的 getDeviceInfo 方法增加 TapDB 中的 DeviceId 和 TapTapDID
- 登录云玩适配更新


## 2.1.6
更新时间 2021-07-01

### Bug 修复
- **Login:** 修复 TapTap 授权登录的一些 UI 问题


## 2.1.5
更新时间 2021-06-22

- 动态场景化的回调 
- 云玩内唤起主站客户端登录 
- 安卓 DB 相关修改 （游戏获取taptap共享ID）


## 2.1.4
更新时间 2021-06-10

### 功能更新
- **Friend:** 新增设置富信息和查询富信息接口
- **Friend:** TapUserRelationShip 新增 online & time & TapRichPresence 参数(仅获取好友列表的场景返回)


## 2.1.3
更新时间 2021-05-28

- TapMoment 在部分带刘海设备上判断失败导致UI可能被遮挡的问题
- TapDB 增加对UE4的支持性改动 
- 多语言新增 （繁体中文，日语，韩语，泰语，印度尼西亚语）支持


## 2.1.2
更新时间 2021-05-14

- 新增 TapFriendUI 模块，不包含任何对外接口，只包含自动弹出好友关注Dialog的相关代码和资源 
- TapFriends 模块新增接口 
    - 注册消息回调接口（目前好友链接跳转进入demo后打开dialog的同时会通过该回调通知游戏） 
    - 搜索用户 
    - 获取好友邀请链接 
    - 分享好友邀请（自动弹出系统分享） 
- TapBootstrap 模块 删除/隐藏打开用户中心接口 openUserCenter


## 2.1.1
更新时间 2021-05-10


## 2.0.0
更新时间 2021-04-08

TapSDK 开发者中心文档 https://developer.taptap.com/v2-doc/sdk