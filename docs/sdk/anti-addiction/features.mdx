---
title: 实名认证和防沉迷功能介绍
sidebar_label: 功能介绍
sidebar_position: 1
---

:::tip
暂无版号的游戏也可以使用实名认证和防沉迷功能。
:::


## 准备工作

在使用 TDS 实名认证和防沉迷服务之前，需要在对应的游戏里找到 **游戏服务 > 开发与构建 > 合规认证** 开通服务。如下图，可选「已有版号」或「暂无版号」方案，然后点击立即开通即可。

![](https://capacity-files.lcfile.com/8xGphnizlUYCzCxGCgsda1d07119IRqG/compliance-certification.png)

「已有版号」或「暂无版号」方案根据游戏的实际情况选择。

### 暂无版号 

版号还未申请或正在国家新闻出版署审核中的游戏，可选「暂无版号」方案。游戏拿到版号后，可以再切换到有版号方案。「暂无版号」方案只需要点击上图的立刻开通按钮，就操作完成了。 

### 已有版号

#### 注册中宣部实名认证系统

有版号游戏需要完成中宣部实名认证系统的注册，无版号游戏暂时不需要注册。注册步骤如下：

在 [中宣部网络游戏防沉迷实名认证系统](https://wlc.nppa.gov.cn/fcm_company/index.html#/login?redirect=%2F) 完成应用的注册，应用注册后还需要完成中宣部「接口测试」并且游戏需要通过中宣部的审核。

获取相关凭证：

- 游戏备案识别码 `bizId`
- 应用标识 `APPID` 
- 应用密钥 `Secret Key`

![](/img/anti-addiction/biz-id.png)

![](/img/anti-addiction/secretkey.png)

游戏在中宣部的审核状态必须为「审核通过」的状态。

![](https://capacity-files.lcfile.com/BC7gUR6wfpOh9PHj8XwKybxseeHhl6Fq/anti-examine-success.png)

游戏在中宣部必须完成接口测试，中宣部目前需要测试的接口用例为 8 个，需要注意的是在中宣部 **测试接口 > 预置参数 > IP 白名单** 这里的「IP 白名单」需要配置游戏侧自己的公网 IP，中宣部接口测试是临时性的，通过之后便不再使用了。

![](/img/anti-addiction/testcase.png)

然后在 TapTap 开发者中心后台完成参数配置，使用 TapTap 开发者中心后台提供的 IP 白名单地址填入中宣部系统后台：

![](https://capacity-files.lcfile.com/3WYezwPnXmK3zOLdVGLPWuvuf0MX4m1M/anti-addiction-qualification.png)

## 接入 TDS 实名认证和防沉迷服务

完成准备工作后，方可接入 TDS 实名认证和防沉迷服务的 SDK。最佳实践是：在用户登录成功后，弹出「TapTap 快速认证」授权框，如果点击「使用」按钮跳转到 TapTap 客户端完成授权认证，如果点击「不使用」按钮，弹出手动填写实名信息的提示框，完成真实信息填写并进行实名认证。

:::tip
注意，「TapTap 快速认证」授权框是默认展示的，SDK 不支持直接弹出手动填写实名身份信息的提示框。用户要手动点击「不使用」按钮，才会弹出手动填写信息的输入框。
:::

### TapTap 快速认证

TDS 提供了 TapTap 账号的快速实名认证功能，在经过玩家同意授权之后，允许玩家使用在 TapTap 里已经通过国家认证的实名信息快速完成游戏中的认证流程。

业务流程：

![](/img/anti-addiction/anti-addiction-flow.png)

界面预览：

![](/img/anti-addiction/image2021-10-18_17-57-51.png)

### 游戏实名认证

按照国家新闻出版署[《关于进一步严格管理切实防止未成年人沉迷网络游戏的通知》](http://www.nppa.gov.cn/nppa/contents/279/98792.shtml)，各游戏出版运营企业均须在游戏内落实游戏实名认证和防沉迷新策略。《通知》中要求，所有用户必须使用真实有效身份信息进行游戏账号注册并登录网络游戏。TDS 已为开发者自动对接了中宣部网络游戏防沉迷实名认证系统，并以开发者主体进行信息上报，符合中宣部对游戏企业接入的合规要求。

如果没有使用 TapTap 快速认证，即弹出「TapTap 快速认证」授权框后，点击「不使用」按钮，则会弹出手动填写实名信息的提示框，完成真实信息填写并进行实名认证。完成填写后，TDS 会将信息提交至中宣部系统中进行真实性校验（请先确认已完成开发者中心的配置工作，否则无法成功校验）。

![](/img/anti-addiction/anti-addiction-flow-2.png)

界面预览：

![](/img/anti-addiction/image2021-10-19_17-4-12.png)

## 防沉迷策略

《通知》中要求，游戏企业必须严格管理未成年的游戏时间以及付费额度。SDK 封装了相应接口，游戏可通过 TDS 云端查询未成年玩家是否处于可以游戏的时间段内，以及未成年玩家的某笔消费是否受限。

![](/img/anti-addiction/not-allow-play.png)

### 游戏时间限制

仅允许未成年人在**周五、周六、周日和法定节假日的 20:00 至 21:00** 进行游戏。

### 充值额度限制

- 不满 8 岁，无法在游戏内进行充值。

**同一网络游戏企业**所提供的游戏付费服务需要满足:

- 满 8 岁，不满 16 岁的用户，单次充值 ≤ 50 元 ，单月充值累计 ≤ 200 元
- 满 16 岁，不满 18 岁的用户，单次充值 ≤ 100 元 ，单月充值累计 ≤ 400 元

注意，计算限制时，同一企业的所有网络游戏的充值共同累计。
例如，假定一家企业名下有两款网络游戏，一个满 8 岁，不满 16 岁的用户某月在其中一款游戏下累计充值了 100 元，那么他在另一款游戏下最多只能再充 100 元。


## 测试账号

测试账号的使用场景分为两种：
- 第一种：游戏处于开发测试阶段，需要测试账号来进行实名认证防沉迷功能测试。
- 第二种：适用于申请游戏版号的场景。

实名认证防沉迷提供的测试账号强依赖于 TapTap 登录，按照国家新闻出版署的要求因此提供 30 个账号，包含：

- 未实名空账号一组，共 3 个；
- 未成年人账号两组，共 18 个，每组含高、中、低（满 16 周岁未满 18 周岁，满 8 周岁未满 16 周岁，未满 8 周岁）各 3 个；
- 成年人账号一组（满 18 周岁），共 9 个。

依据测试账号的使用场景将测试账号的使用模式分为两种：**常规模式** 和 **测试模式**。

### 常规模式

常规模式下测试账号的状态和属性是无法变更的，这种模式适用于游戏提交版署审核、申请版号的场景。

### 测试模式

为方便开发者针对未成年玩家的实名认证防沉迷功能进行测试，因此推出测试模式，该模式下测试账号的状态和属性是可以更改的。比如，针对提供的未成年测试账号可以更改当前时间是否可玩、已充值金额，这样开发者不需要等待到未成年合规游戏时间段时进行防沉迷功能测试。测试账号可以通过依次进入 **TapTap 开发者中心 > 你的游戏 > 游戏服务 > 合规认证 > 测试账号** 进行查看。

## Server 端 Webhook 设置

网络游戏企业必须严格按照有关法律法规妥善保存、保护用户提供的实名注册信息。Webhook 用于接收用户在游戏实名认证过程中手动输入的实名信息，如果用户使用 TapTap 快速认证，则不会返回。游戏方需要在游戏服务器上设置 Webhook，并在开发者中心后台配置好 Webhook 的 URL。

