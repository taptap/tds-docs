---
title: Client Engine Overview
sidebar_label: Overview
sidebar_position: 1
---

:::info
**Before reading this document, please read [Multiplayer Service Features](/sdk/multiplayer/features/) and [MasterClient](/sdk/multiplayer/guide/js/#masterclient) to understand the infrastructure of Multiplayer development. **
:::

## Client Engine What problem is solved

The Multiplayer service (i.e., the Multiplayer service in the figure below) is a good solution to the problem of exchanging messages between players in a "room" abstraction and between rooms. Let's take the game "Rock, Paper, Scissors" as an example, the flow of the game looks like this:

![image](/img/client-engine/client-engine1.png)

where the Multiplayer service plays a purely message forwarding role, and for the sake of the discussion that follows, we can simplify this diagram a bit (the dotted line represents that the message is passed through the Multiplayer service):

![image](/img/client-engine/client-engine2.png)

This process is simple, but there are some problems:

1. all players have the same God's view, they can see all the states, and the player who throws a punch later (such as B in the picture) can throw a punch according to A's choice to achieve a sure win.
2. The final result is reported by the client, and the client can fake the result. 3.
3. A, as the MasterClient, can manipulate some operations involving randomness, such as shuffling cards, rolling dice, etc. (There is no similar mechanism in "Rock, Paper, Scissors").

Different game types have different tolerance for these problems. Without changing the flow of the above diagram, each of these problems can be solved in its own way. However, the Client Engine solution tries to solve these problems by taking a radical step away from them: running the MasterClient on the server side. In the Client Engine scenario, the game flows like this:

![image](/img/client-engine/client-engine3.png)

In this flow, the MasterClient running on the server side is the only referee with a God's perspective. All players exchange information with MasterClient only, and MasterClient will only synchronise part of the information to the client (e.g. only tell B "A threw a punch", but what was thrown is unknown). The game logic operations (including randomisation, win/loss decision) and the final result reporting are all done on the server side.

The **Multiplayer service is the foundation. The player client does not communicate directly with the MasterClient; the dotted line in the diagram indicates that messages are still forwarded through the Multiplayer service. **

## Client Engine Introduction

Client Engine is a Client hosting solution for multiplayer online games. The [Multiplayer Service](/sdk/multiplayer/features/) provides a MasterClient mechanism to control the game logic: MasterClient is a special Client that receives and processes all events and messages within the game, processes them in real-time, and then sends the results to the other game clients to control the downward execution of the game. It receives and processes all events and messages in the game, processes them in real time, and then sends the results to other game clients to control the game downstream. Developers can develop a complete set of MasterClient logic based on an SDK for Multiplayers, and then host such a "client" in the Client Engine, eliminating the burden of program deployment and operation and maintenance. As shown in the diagram:

![image](/img/client-engine/structure.png)

In addition to MasterClient hosting, developers can also in the Client Engine

* Host ordinary virtual players to increase the fun and activity of the game.
* Customise the REST API to complete the development of other logic.

Hosting game logic in Client Engine has the following advantages:

* Lower network latency. The game running process involves very frequent message interactions between "game players" - "multiplayer battle cloud" - MasterClient, Client Engine and multiplayer battle cloud are in the same physical network, which can significantly reduce the transmission delay of the public network.
* More mature operation and maintenance support: Client Engine provides perfect log collection, status monitoring, load balancing, and automatic fault-tolerant recovery mechanism, which can provide higher stability guarantee.
* Client Engine provides a huge resource pool, which can quickly respond to the temporary and sudden expansion demand of individual game products, without the need to manually adjust the instances, and automatically complete the expansion.

## Documentation and Demo

Please refer to the documentation for details on how to use Client Engine:

* [Client Engine Quick Start - Node.js](/sdk/multiplayer/client-engine/quick-start-node/) Introduces starting from the initial project, how to develop locally for debugging and deploy to the cloud.
* [Your First Client Engine Trivia Game - Node.js](/sdk/multiplayer/client-engine/first-game-node/) This document helps you to get started quickly by implementing a rock-paper-scissors guessing trivia game with the Client Engine. After completing this tutorial, you will have an initial understanding of the basic flow of using the Client Engine.
* [Client Engine Development Guide - Node.js](/sdk/multiplayer/client-engine/guide-node/) This tutorial provides an in-depth explanation of the Client Engine SDK based on the initial project.

Example Demo:

* [Turn-based Demo](/sdk/multiplayer/client-engine/demo/#Turn-based-Battle-Demo).

## Price

### Developer Edition

Under the development version, we provide a "trial version" for developers to use for free:

* Free 100 CCU and 50% CPU.
* Free 100 CCU and 50% CPU.
* Auto-scaling and load balancing are not supported.
* Forced hibernation.

Hibernation policy:

Standard instances do not hibernate.

Experience instances enforce a hibernation policy:

* Hibernate if the application has not had any external requests for a recent period of time (half an hour).
* Starts immediately after hibernation if there is a new external request for the instance. The visitor experience is that the response time for the first request is 5 ~ 30 seconds (depending on the instance startup time), and the response time for subsequent visits returns to normal.
* Forced hibernation: If the total number of hours of operation exceeds 18 hours in the last 24 hours, it will be forced to hibernate. At this point, new requests will receive a 503 error response code, which can be viewed at **Cloud Services Console > Play > Client Engine > Statistics**.

If you do not want the experience instances in the preparation environment to be out of service due to forced sleep, or if you need multiple instances to fully emulate a production environment, you can purchase standard instances in the preparation environment as needed.

### Business Edition

Under Commercial Edition, you can upgrade from "Experience Edition" to "Standard Edition" through the console. The "Standard Edition" provides a preparation environment, supports automatic capacity expansion and load balancing, and will not sleep.

"The Standard Edition is scaled and billed on a "Compute Unit" basis. A computing unit contains 100 CCUs and 50% CPUs, and we will automatically increase the computing unit when any of the indicators are exhausted. For example, if Client Engine consumes 80 CCU and 90% CPU at a certain moment, the system will allocate 2 computing units for it.

The system will bill according to the daily peak consumption of computing units, please refer to [official website](https://leancloud.cn/pricing/) for the price of a single computing unit. For example, if an application on a domestic node uses at most 2 computing units on a certain day, the charge for that day will be 2 * domestic computing unit price.

:::info
Note: After upgrading to "Standard Edition", the service will be provided and billed at a minimum of 1 compute unit regardless of whether it is used or not.
:::